c
params
c
player_city_id = current_player.city.id
c
n
city.game_places.first
city
n
c
City.find_by(id: city_idx)
City.find(params[id: city_idx])
City.find(params[city_idx])
City.find(43)
city = City.find(params[:city_idx])
n
city_idx = areaParams.to_i
n
areaParams
c
b
a
p > 1 ? a = p : b = p
p = 0
0 ? 1 : 2
GamePlace.find(params[:id])
'43'.to_i
'area'.to_i
params
c
params
c
params
c
params
c
n
nn
n
c
reservations
c
reservations.sort { |a, b| a.date_info <=> b.date_info }
a.sort { |a, b| b.date_info <=> a.date_info }
a.sort { |a, b| a.date_info <=> b.date_info }
a = reservations[0..3]
c
params
c
params
c
params
c
n
c
array
c
game_places
@game_places
c
@game_places
c
array
c
game_places.first.reviews.average(:overall_rating)
game_places.first.reviews
game_places.first
c
gp2
gp1
c
@game_places
c
@game_places
c
cc
c
cc
c
cc
c
cc
c
cc
c
cc
c
cc
c
cc
c
a = gp2.reviews.average(:overall_rating)
c
a = gp2.reviews.average(:overall_rating)
a = gp1.reviews.average(:overall_rating)
c
n
total1 > total2 ? @game_places << gp1 : @game_places << gp2
total2
total1
n
c
total2
total1
n
gp2
c
gp2
c
a = gp1.reviews.pluck(:overall_rating)
c
n
@game_places
n
params
c
r = GamePlace.all.each { |gp| @game_places << gp if gp.city.area == 'east'}
n
current_player
n
c
sort = params[:sort]
params
c
nc
n
game_places
GamePlace.all.each { |gp| game_places << gp if gp.city.area == params[:area]}
GamePlace.all.each do |gp|
game_places = []
c
n
params[:area]
params
c
params
c
params
c
params
c
params
c
params
c
params
c
params
c
params
c
params
c
@reviews
@reviews = @reviews.where(game_place_id: params[:gpId])
@reviews = Review.all
params[:gpId]
params
c
Reservation.all.select{ |reservation| reservation.player_id == current_player.id}
params
c
@game_places = GamePlace.where(:city_id => filter_params[:location])
@game_places = @game_places.where(:city_id => filter_params[:location])
@game_places
c
n
filter_params[:location]
n
names
filter_params
c
 @game_places.where("lower(name) LIKE lower(?)", "%#{filter_params[:name]}%")
n
names
c
n
filter_params
@game_places = game_places
c
n
game_places
c
cc
c
gp.city.name == cities.first
gp.city.name
gp.city
gp
n
cities
c
cities = City.pluck(:name).select {|gp| gp.downcase.include?(filter_params[:name].downcase)}
names
names = GamePlace.pluck(:name).select {|gp| gp.downcase.include?(filter_params[:name])}
cities
cities.select {|gp| gp.downcase.include?(filter_params[:name].downcase)}
cities
c
names
c
City.pluck(:name)
g.map { |gp| return true if gp.include? filter_params[:name] }
g.map { |gp| gp.include? filter_params[:name] }
filter_params[:name]
g.each { |gp| gp.include? filter_params[:name] }
g = GamePlace.pluck(:name)
GamePlace.pluck(:name)
@game_places
g = @game_places.join(:cities)
c
n
game_places
n
@game_places
filter_params[:rating] > '0'
c
n
filter_params[:name] && @game_places.length > 0
n
game_places
n
filter_params[:rating] > '0'
c
filter_params[:rating] == '0'
filter_params[:rating] > '0'
filter_params[:rating]
c
filter_params[:name] && @game_places.length > 0
n
filter_params[:name] && @game_places
c
@game_places
c
n
filter_params
n
game_places
c
avg >= filter_params[:rating].to_i
avg = rat_reviews.sum / rat_reviews.length
rat_reviews.sum >= filter_params[:rating].to_i
rat_reviews = gp.reviews.pluck(:overall_rating)
gp
c
                end
                    end
                        game_places << gp
                    if rat_reviews.sum >= filter_params[:rating].to_i
                    rat_reviews = gp.reviews.pluck(:overall_rating)
@game_places.each do |gp|
                end
                    end
                        game_places << gp
                    if rat_reviews.sum >= filter_params[:rating]
                    rat_reviews = gp.reviews.pluck(:overall_rating)
